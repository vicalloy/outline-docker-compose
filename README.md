# outline-docker-compose

Install a self-hosted [Outline](https://github.com/outline/outline) wiki instance in a couple of minutes.

## Features:

1. A simple make and bash script to help you generate all the conf required.
1. A docker-compose to run your service.
1. A [OIDC server](https://github.com/vicalloy/oidc-server) to manage users, no need to login via Slack or Google.

## How to use

1. Initializing the system.
    ```
    git clone https://github.com/vicalloy/outline-docker-compose.git
    cd outline-docker-compose
    cp scripts/config.sh.sample scripts/config.sh
    # update config file: vim scripts/config.sh
    make install  # Create a docker-compose config file and start it. Initializing the oidc-server(add oidc client for outline and create a superuser).
    ```
   - NOTE: Outline Wiki 0.72.0-1 supports local file storage. You can set `FILE_STORAGE=local` to use local file storage(MINIO is no longer required).
2. Open `http://127.0.0.1:8888` and login to outline.
3. Open `http://127.0.0.1:8888/uc/admin/auth/user/` to add new users.

## scripts/config.sh

The config file [scripts/config.sh.sample](scripts/config.sh.sample)

## Makefile

- `make install` create docker-compose config file and start it. Initializing the oidc-server(add oidc client for outline and create a superuser)
- `make start` start outline
- `make stop` stop outline
- `make clean` remove all config file generated by script.
- `make clean-data` ⚠️ You will lose all your data


## FAQ

1. Q: Added a new user, but can't login the outline
    - You should add an email for the new user
    - If the domain in the email is not the same as the admin user's domain, you should add the domain to the settings `ALLOWED_DOMAINS`

2. Q: How to expose outline site to public
    - In `scripts/config.sh` file, change the line `URL=http://127.0.0.1:8888` to `URL=<my_url>:8888`
