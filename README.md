# outline-docker-compose

Install a self-hosted [Outline](https://github.com/outline/outline) wiki instance in a couple of minutes.

## Features:

1. A simple make and bash script to help you generate all the conf required
1. A docker-compose to run your service
1. Use [MinIO](https://github.com/minio/minio) instead of AWS S3, so that everything is really self-hosted
1. A [OIDC server](https://github.com/vicalloy/oidc-server) to manage user, no need to login via slack or google

## How to use

1. Initializing the system
    ```
    git clone https://github.com/vicalloy/outline-docker-compose.git
    cd outline-docker-compose
    cp scripts/config.sh.sample scripts/config.sh
    # update config file: vim scripts/config.sh
    make install  # create docker-compose config file and start it. Initializing the oidc-server(add oidc client for outline and create a superuser).
    ```
1. Open `http://127.0.0.1:8888` and login to outline
1. Open `http://127.0.0.1:8888/uc/admin/auth/user/` to add new user

## scripts/config.sh

The config file [scripts/config.sh.sample](scripts/config.sh.sample)

## Makefile

- `make install` create docker-compose config file and start it. Initializing the oidc-server(add oidc client for outline and create a superuser)
- `make start` start outline
- `make stop` stop outline
- `make clean` remove all config file generated by script.
- `make clean-data` ⚠️ You will lost all your data


## FAQ

1. Q: Added a new user, but can't login the outline
    - You should add a email for the new user
    - If the domain in the email is not same as admin user's domain, you should add the domain to settings `ALLOWED_DOMAINS`


### Infrastructure model

![Insfrastructure model](.infragenie/infrastructure_model.png)